!function(e){var n={};function I(g){if(n[g])return n[g].exports;var t=n[g]={i:g,l:!1,exports:{}};return e[g].call(t.exports,t,t.exports,I),t.l=!0,t.exports}I.m=e,I.c=n,I.d=function(e,n,g){I.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:g})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,n){if(1&n&&(e=I(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var g=Object.create(null);if(I.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)I.d(g,t,function(n){return e[n]}.bind(null,t));return g},I.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(n,"a",n),n},I.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},I.p="",I(I.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/auth.js\n/* harmony default export */ var auth = ({\n    initiateLogin: function(provider, database) {\n        firebase.auth().getRedirectResult().then(function (result) {\n            if (result.credential) {\n                database.ref(\'users/\' + result.user.uid).set({\n                    gamma: 0,\n                    photo: result.user.photoURL\n                });\n                return result.user;\n            } else {\n                firebase.auth().signInWithRedirect(provider);\n                return "";\n            }\n        }).catch(function (error) {\n            console.log(error);\n        });\n    }\n});\n\n\n// CONCATENATED MODULE: ./src/index.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPhoneElement", function() { return createPhoneElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPhone", function() { return createPhone; });\n\n\nvar phones = {};\n\nlet user;\n\nconst createPhoneElement = function(key) {\n    let newDiv = document.createElement("div");\n    newDiv.classList.add("phone");\n    newDiv.setAttribute("id", key);\n    return newDiv;\n}\n\nconst createPhone = (element) => {\n    return {\n        rotate: function(gamma) {\n            this.element.style.transform =\n            "rotateZ(1deg) " +\n            "rotateX(45deg) " +\n            "rotateY(" + (gamma) + "deg) " +\n            "skew(-3deg)";\n        },\n        element: element\n    }\n};\n\nconst onChangeHandler = function (snapshot) {\n    let userOrientations = snapshot.val().users;\n    for (var key in userOrientations) {\n        phones[key].rotate(userOrientations[key].gamma);\n    }\n}\n\ndocument.addEventListener(\'DOMContentLoaded\', function () {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const database = firebase.database();\n    auth.initiateLogin(provider, database);\n    user = firebase.auth().currentUser;\n\n    window.addEventListener("deviceorientation", function (event) {\n        if (user === null) {\n            user = firebase.auth().currentUser;\n        }\n        firebase.database().ref(\'users/\' + user.uid).set({\n            gamma: event.gamma,\n            photo: user.photoURL\n        });\n    });\n\n    const dbChangeHandler = () => {\n        firebase.database().ref().on("value", onChangeHandler, function (errorObject) {\n            console.log("The read failed: " + errorObject.code);\n        });\n    }\n\n    const addPhonesToPage = () => {\n        firebase.database().ref(\'/users\').once(\'value\').then(function (snapshot) {\n            const users = snapshot.val();\n            for (var key in users) {\n                if (!users.hasOwnProperty(key)) continue;\n                let newPhone = createPhoneElement(key);\n                document.body.appendChild(newPhone);\n                phones[key] = createPhone(newPhone);\n            }\n\n            dbChangeHandler();\n        });\n    }\n\n    addPhonesToPage();\n});\n\n/* harmony default export */ var src = __webpack_exports__["default"] = ({createPhoneElement, createPhone});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXV0aC5qcz8xYWI2Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcz9iNjM1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7Ozs7QUNqQkQ7QUFBQTtBQUE2Qjs7QUFFN0I7O0FBRUE7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxDQUFDOztBQUVjLDBFQUFDLGdDQUFnQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICAgIGluaXRpYXRlTG9naW46IGZ1bmN0aW9uKHByb3ZpZGVyLCBkYXRhYmFzZSkge1xuICAgICAgICBmaXJlYmFzZS5hdXRoKCkuZ2V0UmVkaXJlY3RSZXN1bHQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZigndXNlcnMvJyArIHJlc3VsdC51c2VyLnVpZCkuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtbWE6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBob3RvOiByZXN1bHQudXNlci5waG90b1VSTFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudXNlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbiIsImltcG9ydCBhdXRoIGZyb20gJy4vYXV0aC5qcyc7XG5cbnZhciBwaG9uZXMgPSB7fTtcblxubGV0IHVzZXI7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQaG9uZUVsZW1lbnQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICBsZXQgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZChcInBob25lXCIpO1xuICAgIG5ld0Rpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBrZXkpO1xuICAgIHJldHVybiBuZXdEaXY7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQaG9uZSA9IChlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm90YXRlOiBmdW5jdGlvbihnYW1tYSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9XG4gICAgICAgICAgICBcInJvdGF0ZVooMWRlZykgXCIgK1xuICAgICAgICAgICAgXCJyb3RhdGVYKDQ1ZGVnKSBcIiArXG4gICAgICAgICAgICBcInJvdGF0ZVkoXCIgKyAoZ2FtbWEpICsgXCJkZWcpIFwiICtcbiAgICAgICAgICAgIFwic2tldygtM2RlZylcIjtcbiAgICAgICAgfSxcbiAgICAgICAgZWxlbWVudDogZWxlbWVudFxuICAgIH1cbn07XG5cbmNvbnN0IG9uQ2hhbmdlSGFuZGxlciA9IGZ1bmN0aW9uIChzbmFwc2hvdCkge1xuICAgIGxldCB1c2VyT3JpZW50YXRpb25zID0gc25hcHNob3QudmFsKCkudXNlcnM7XG4gICAgZm9yICh2YXIga2V5IGluIHVzZXJPcmllbnRhdGlvbnMpIHtcbiAgICAgICAgcGhvbmVzW2tleV0ucm90YXRlKHVzZXJPcmllbnRhdGlvbnNba2V5XS5nYW1tYSk7XG4gICAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG4gICAgY29uc3QgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpO1xuICAgIGF1dGguaW5pdGlhdGVMb2dpbihwcm92aWRlciwgZGF0YWJhc2UpO1xuICAgIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjtcbiAgICAgICAgfVxuICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigndXNlcnMvJyArIHVzZXIudWlkKS5zZXQoe1xuICAgICAgICAgICAgZ2FtbWE6IGV2ZW50LmdhbW1hLFxuICAgICAgICAgICAgcGhvdG86IHVzZXIucGhvdG9VUkxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkYkNoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkub24oXCJ2YWx1ZVwiLCBvbkNoYW5nZUhhbmRsZXIsIGZ1bmN0aW9uIChlcnJvck9iamVjdCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGFkZFBob25lc1RvUGFnZSA9ICgpID0+IHtcbiAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJy91c2VycycpLm9uY2UoJ3ZhbHVlJykudGhlbihmdW5jdGlvbiAoc25hcHNob3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJzID0gc25hcHNob3QudmFsKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdXNlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXJzLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGxldCBuZXdQaG9uZSA9IGNyZWF0ZVBob25lRWxlbWVudChrZXkpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobmV3UGhvbmUpO1xuICAgICAgICAgICAgICAgIHBob25lc1trZXldID0gY3JlYXRlUGhvbmUobmV3UGhvbmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkYkNoYW5nZUhhbmRsZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkUGhvbmVzVG9QYWdlKCk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQge2NyZWF0ZVBob25lRWxlbWVudCwgY3JlYXRlUGhvbmV9OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')}]);