!function(n){var e={};function I(g){if(e[g])return e[g].exports;var t=e[g]={i:g,l:!1,exports:{}};return n[g].call(t.exports,t,t.exports,I),t.l=!0,t.exports}I.m=n,I.c=e,I.d=function(n,e,g){I.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:g})},I.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},I.t=function(n,e){if(1&e&&(n=I(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var g=Object.create(null);if(I.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)I.d(g,t,function(e){return n[e]}.bind(null,t));return g},I.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return I.d(e,"a",e),e},I.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},I.p="",I(I.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/auth.js\n/* harmony default export */ var auth = ({\n    initiateLogin: function(provider, database) {\n        firebase.auth().getRedirectResult().then(function (result) {\n            if (result.credential) {\n                database.ref(\'users/\' + result.user.uid).set({\n                    gamma: 0,\n                    photo: result.user.photoURL\n                });\n                return result.user;\n            } else {\n                firebase.auth().signInWithRedirect(provider);\n                return "";\n            }\n        }).catch(function (error) {\n            console.log(error);\n        });\n    }\n});\n\n\n// CONCATENATED MODULE: ./src/phone.js\nconst Phone = {};\n\nconst createPhoneElement = function(key) {\n    let newDiv = document.createElement("div");\n    newDiv.classList.add("phone");\n    newDiv.setAttribute("id", key);\n    return newDiv;\n};\n\nconst createPhone = (element) => {\n    return {\n        rotate: function(gamma) {\n            this.element.style.transform =\n            "rotateZ(1deg) " +\n            "rotateX(45deg) " +\n            "rotateY(" + (gamma) + "deg) " +\n            "skew(-3deg)";\n        },\n        element: element\n    }\n};\n\nPhone.createPhone = createPhone;\nPhone.createPhoneElement = createPhoneElement;\n\n/* harmony default export */ var phone = (Phone);\n// CONCATENATED MODULE: ./src/index.js\n\n\n\nvar phones = {};\n\nlet user;\n\nconst onChangeHandler = function (snapshot) {\n    let userOrientations = snapshot.val().users;\n    for (var key in userOrientations) {\n        phones[key].rotate(userOrientations[key].gamma);\n    }\n}\n\ndocument.addEventListener(\'DOMContentLoaded\', function () {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const database = firebase.database();\n    auth.initiateLogin(provider, database);\n    user = firebase.auth().currentUser;\n\n    window.addEventListener("deviceorientation", function (event) {\n        if (user === null) {\n            user = firebase.auth().currentUser;\n        }\n        firebase.database().ref(\'users/\' + user.uid).set({\n            gamma: event.gamma,\n            photo: user.photoURL\n        });\n    });\n\n    const dbChangeHandler = () => {\n        firebase.database().ref().on("value", onChangeHandler, function (errorObject) {\n            console.log("The read failed: " + errorObject.code);\n        });\n    }\n\n    const addPhonesToPage = () => {\n        firebase.database().ref(\'/users\').once(\'value\').then(function (snapshot) {\n            const users = snapshot.val();\n            for (var key in users) {\n                if (!users.hasOwnProperty(key)) continue;\n                let newPhone = phone.createPhoneElement(key);\n                document.body.appendChild(newPhone);\n                phones[key] = phone.createPhone(newPhone);\n            }\n\n            dbChangeHandler();\n        });\n    }\n\n    addPhonesToPage();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXV0aC5qcz8xYWI2Iiwid2VicGFjazovLy8uL3NyYy9waG9uZS5qcz8xOTkzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcz9iNjM1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7Ozs7QUNqQkQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRWUsK0NBQUssRTs7QUN6QlM7QUFDRTs7QUFFL0I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSztBQUNwQztBQUNBLDhCQUE4QixLQUFLO0FBQ25DOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICAgIGluaXRpYXRlTG9naW46IGZ1bmN0aW9uKHByb3ZpZGVyLCBkYXRhYmFzZSkge1xuICAgICAgICBmaXJlYmFzZS5hdXRoKCkuZ2V0UmVkaXJlY3RSZXN1bHQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZigndXNlcnMvJyArIHJlc3VsdC51c2VyLnVpZCkuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtbWE6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBob3RvOiByZXN1bHQudXNlci5waG90b1VSTFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudXNlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbiIsImNvbnN0IFBob25lID0ge307XG5cbmNvbnN0IGNyZWF0ZVBob25lRWxlbWVudCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGxldCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld0Rpdi5jbGFzc0xpc3QuYWRkKFwicGhvbmVcIik7XG4gICAgbmV3RGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIGtleSk7XG4gICAgcmV0dXJuIG5ld0Rpdjtcbn07XG5cbmNvbnN0IGNyZWF0ZVBob25lID0gKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb3RhdGU6IGZ1bmN0aW9uKGdhbW1hKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID1cbiAgICAgICAgICAgIFwicm90YXRlWigxZGVnKSBcIiArXG4gICAgICAgICAgICBcInJvdGF0ZVgoNDVkZWcpIFwiICtcbiAgICAgICAgICAgIFwicm90YXRlWShcIiArIChnYW1tYSkgKyBcImRlZykgXCIgK1xuICAgICAgICAgICAgXCJza2V3KC0zZGVnKVwiO1xuICAgICAgICB9LFxuICAgICAgICBlbGVtZW50OiBlbGVtZW50XG4gICAgfVxufTtcblxuUGhvbmUuY3JlYXRlUGhvbmUgPSBjcmVhdGVQaG9uZTtcblBob25lLmNyZWF0ZVBob25lRWxlbWVudCA9IGNyZWF0ZVBob25lRWxlbWVudDtcblxuZXhwb3J0IGRlZmF1bHQgUGhvbmU7IiwiaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoLmpzJztcbmltcG9ydCBQaG9uZSBmcm9tICcuL3Bob25lLmpzJztcblxudmFyIHBob25lcyA9IHt9O1xuXG5sZXQgdXNlcjtcblxuY29uc3Qgb25DaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG4gICAgbGV0IHVzZXJPcmllbnRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKS51c2VycztcbiAgICBmb3IgKHZhciBrZXkgaW4gdXNlck9yaWVudGF0aW9ucykge1xuICAgICAgICBwaG9uZXNba2V5XS5yb3RhdGUodXNlck9yaWVudGF0aW9uc1trZXldLmdhbW1hKTtcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcbiAgICBjb25zdCBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7XG4gICAgYXV0aC5pbml0aWF0ZUxvZ2luKHByb3ZpZGVyLCBkYXRhYmFzZSk7XG4gICAgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh1c2VyID09PSBudWxsKSB7XG4gICAgICAgICAgICB1c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyO1xuICAgICAgICB9XG4gICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCd1c2Vycy8nICsgdXNlci51aWQpLnNldCh7XG4gICAgICAgICAgICBnYW1tYTogZXZlbnQuZ2FtbWEsXG4gICAgICAgICAgICBwaG90bzogdXNlci5waG90b1VSTFxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRiQ2hhbmdlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5vbihcInZhbHVlXCIsIG9uQ2hhbmdlSGFuZGxlciwgZnVuY3Rpb24gKGVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWRkUGhvbmVzVG9QYWdlID0gKCkgPT4ge1xuICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignL3VzZXJzJykub25jZSgndmFsdWUnKS50aGVuKGZ1bmN0aW9uIChzbmFwc2hvdCkge1xuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBzbmFwc2hvdC52YWwoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB1c2Vycykge1xuICAgICAgICAgICAgICAgIGlmICghdXNlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1Bob25lID0gUGhvbmUuY3JlYXRlUGhvbmVFbGVtZW50KGtleSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuZXdQaG9uZSk7XG4gICAgICAgICAgICAgICAgcGhvbmVzW2tleV0gPSBQaG9uZS5jcmVhdGVQaG9uZShuZXdQaG9uZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRiQ2hhbmdlSGFuZGxlcigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRQaG9uZXNUb1BhZ2UoKTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')}]);