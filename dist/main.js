!function(n){var e={};function g(t){if(e[t])return e[t].exports;var I=e[t]={i:t,l:!1,exports:{}};return n[t].call(I.exports,I,I.exports,g),I.l=!0,I.exports}g.m=n,g.c=e,g.d=function(n,e,t){g.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},g.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},g.t=function(n,e){if(1&e&&(n=g(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(g.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var I in n)g.d(t,I,function(e){return n[e]}.bind(null,I));return t},g.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return g.d(e,"a",e),e},g.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},g.p="",g(g.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/auth.js\n/* harmony default export */ var auth = ({\n    initiateLogin: function(provider, database) {\n        firebase.auth().getRedirectResult().then(function (result) {\n            if (result.credential) {\n                database.ref(\'users/\' + result.user.uid).set({\n                    gamma: 0,\n                    photo: result.user.photoURL\n                });\n                return result.user;\n            } else {\n                firebase.auth().signInWithRedirect(provider);\n                return "";\n            }\n        }).catch(function (error) {\n            console.log(error);\n        });\n    }\n});\n\n\n// CONCATENATED MODULE: ./src/phone.js\nconst Phone = {};\n\nconst createPhoneElement = function(key) {\n    let newDiv = document.createElement("div");\n    newDiv.classList.add("phone");\n    newDiv.setAttribute("id", key);\n    return newDiv;\n};\n\nconst createPhone = (element) => {\n    return {\n        rotate: function(gamma) {\n            this.element.style.transform =\n            "rotateZ(1deg) " +\n            "rotateX(45deg) " +\n            "rotateY(" + (gamma) + "deg) " +\n            "skew(-3deg)";\n        },\n        element: element\n    }\n};\n\nPhone.createPhone = createPhone;\nPhone.createPhoneElement = createPhoneElement;\n\n/* harmony default export */ var phone = (Phone);\n// CONCATENATED MODULE: ./src/app.js\nconst App = {};\n\n\n\n\nvar phones = {};\n\nlet user;\n\nconst onChangeHandler = function (snapshot) {\n    let userOrientations = snapshot.val().users;\n    for (var key in userOrientations) {\n        phones[key].rotate(userOrientations[key].gamma);\n    }\n}\n\ndocument.addEventListener(\'DOMContentLoaded\', function () {\n    console.log(\'firebase.auth: \', firebase.auth);\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const database = firebase.database();\n    auth.initiateLogin(provider, database);\n    user = firebase.auth().currentUser;\n    \n    window.addEventListener("deviceorientation", function (event) {\n        if (user === null) {\n            user = firebase.auth().currentUser;\n        }\n        firebase.database().ref(\'users/\' + user.uid).set({\n            gamma: event.gamma,\n            photo: user.photoURL\n        });\n    });\n    \n    onLoad(addPhonesToPage);\n});\n\n\nconst dbChangeHandler = () => {\n    firebase.database().ref().on("value", onChangeHandler, function (errorObject) {\n        console.log("The read failed: " + errorObject.code);\n    });\n}\n\n\n\nconst onLoad = (addPhonesToPage) => {\n    firebase.database().ref(\'/users\').once(\'value\')\n        .then(function (snapshot) {\n        const users = snapshot.val();\n        addPhonesToPage(users, dbChangeHandler);\n    });\n}\n\nconst addPhonesToPage = (users, afterPhonesAddedToPage) => {\n    for (var key in users) {\n        let newPhone = phone.createPhoneElement(key);\n        document.body.appendChild(newPhone);\n        phones[key] = phone.createPhone(newPhone);\n    }\n    afterPhonesAddedToPage();\n}\n\nApp.addPhonesToPage = addPhonesToPage;\n\n/* harmony default export */ var app = __webpack_exports__["default"] = (App);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXV0aC5qcz8xYWI2Iiwid2VicGFjazovLy8uL3NyYy9waG9uZS5qcz8xOTkzIiwid2VicGFjazovLy8uL3NyYy9hcHAuanM/MTExMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxDQUFDOzs7O0FDakJEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVlLCtDQUFLLEU7O0FDekJwQjs7QUFFNkI7QUFDRTs7QUFFL0I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QixLQUFLO0FBQzVCO0FBQ0Esc0JBQXNCLEtBQUs7QUFDM0I7QUFDQTtBQUNBOztBQUVBOztBQUVlLDRFQUFHIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gICAgaW5pdGlhdGVMb2dpbjogZnVuY3Rpb24ocHJvdmlkZXIsIGRhdGFiYXNlKSB7XG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5nZXRSZWRpcmVjdFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5jcmVkZW50aWFsKSB7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKCd1c2Vycy8nICsgcmVzdWx0LnVzZXIudWlkKS5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBnYW1tYTogMCxcbiAgICAgICAgICAgICAgICAgICAgcGhvdG86IHJlc3VsdC51c2VyLnBob3RvVVJMXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC51c2VyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFJlZGlyZWN0KHByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuIiwiY29uc3QgUGhvbmUgPSB7fTtcblxuY29uc3QgY3JlYXRlUGhvbmVFbGVtZW50ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgbGV0IG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbmV3RGl2LmNsYXNzTGlzdC5hZGQoXCJwaG9uZVwiKTtcbiAgICBuZXdEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwga2V5KTtcbiAgICByZXR1cm4gbmV3RGl2O1xufTtcblxuY29uc3QgY3JlYXRlUGhvbmUgPSAoZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvdGF0ZTogZnVuY3Rpb24oZ2FtbWEpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPVxuICAgICAgICAgICAgXCJyb3RhdGVaKDFkZWcpIFwiICtcbiAgICAgICAgICAgIFwicm90YXRlWCg0NWRlZykgXCIgK1xuICAgICAgICAgICAgXCJyb3RhdGVZKFwiICsgKGdhbW1hKSArIFwiZGVnKSBcIiArXG4gICAgICAgICAgICBcInNrZXcoLTNkZWcpXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcbiAgICB9XG59O1xuXG5QaG9uZS5jcmVhdGVQaG9uZSA9IGNyZWF0ZVBob25lO1xuUGhvbmUuY3JlYXRlUGhvbmVFbGVtZW50ID0gY3JlYXRlUGhvbmVFbGVtZW50O1xuXG5leHBvcnQgZGVmYXVsdCBQaG9uZTsiLCJjb25zdCBBcHAgPSB7fTtcblxuaW1wb3J0IGF1dGggZnJvbSAnLi9hdXRoLmpzJztcbmltcG9ydCBQaG9uZSBmcm9tICcuL3Bob25lLmpzJztcblxudmFyIHBob25lcyA9IHt9O1xuXG5sZXQgdXNlcjtcblxuY29uc3Qgb25DaGFuZ2VIYW5kbGVyID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG4gICAgbGV0IHVzZXJPcmllbnRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKS51c2VycztcbiAgICBmb3IgKHZhciBrZXkgaW4gdXNlck9yaWVudGF0aW9ucykge1xuICAgICAgICBwaG9uZXNba2V5XS5yb3RhdGUodXNlck9yaWVudGF0aW9uc1trZXldLmdhbW1hKTtcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5sb2coJ2ZpcmViYXNlLmF1dGg6ICcsIGZpcmViYXNlLmF1dGgpO1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG4gICAgY29uc3QgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpO1xuICAgIGF1dGguaW5pdGlhdGVMb2dpbihwcm92aWRlciwgZGF0YWJhc2UpO1xuICAgIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHVzZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XG4gICAgICAgIH1cbiAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ3VzZXJzLycgKyB1c2VyLnVpZCkuc2V0KHtcbiAgICAgICAgICAgIGdhbW1hOiBldmVudC5nYW1tYSxcbiAgICAgICAgICAgIHBob3RvOiB1c2VyLnBob3RvVVJMXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIG9uTG9hZChhZGRQaG9uZXNUb1BhZ2UpO1xufSk7XG5cblxuY29uc3QgZGJDaGFuZ2VIYW5kbGVyID0gKCkgPT4ge1xuICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkub24oXCJ2YWx1ZVwiLCBvbkNoYW5nZUhhbmRsZXIsIGZ1bmN0aW9uIChlcnJvck9iamVjdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcbiAgICB9KTtcbn1cblxuXG5cbmNvbnN0IG9uTG9hZCA9IChhZGRQaG9uZXNUb1BhZ2UpID0+IHtcbiAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignL3VzZXJzJykub25jZSgndmFsdWUnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoc25hcHNob3QpIHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBzbmFwc2hvdC52YWwoKTtcbiAgICAgICAgYWRkUGhvbmVzVG9QYWdlKHVzZXJzLCBkYkNoYW5nZUhhbmRsZXIpO1xuICAgIH0pO1xufVxuXG5jb25zdCBhZGRQaG9uZXNUb1BhZ2UgPSAodXNlcnMsIGFmdGVyUGhvbmVzQWRkZWRUb1BhZ2UpID0+IHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdXNlcnMpIHtcbiAgICAgICAgbGV0IG5ld1Bob25lID0gUGhvbmUuY3JlYXRlUGhvbmVFbGVtZW50KGtleSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobmV3UGhvbmUpO1xuICAgICAgICBwaG9uZXNba2V5XSA9IFBob25lLmNyZWF0ZVBob25lKG5ld1Bob25lKTtcbiAgICB9XG4gICAgYWZ0ZXJQaG9uZXNBZGRlZFRvUGFnZSgpO1xufVxuXG5BcHAuYWRkUGhvbmVzVG9QYWdlID0gYWRkUGhvbmVzVG9QYWdlO1xuXG5leHBvcnQgZGVmYXVsdCBBcHA7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')}]);